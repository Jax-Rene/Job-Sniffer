<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="job">

    <!--<select id="getCustAlarmList" resultClass="java.util.HashMap">-->
        <!--SELECT-->
        <!--ALARM_ID,-->
        <!--ALARM_COUNTS,-->
        <!--IFNULL(ALARM_GROUP,'1') AS ALARM_GROUP,-->
        <!--ALARM_KEY,-->
        <!--ALARM_NAME,-->
        <!--alarm.ALARM_TYPE AS ALARM_TYPE,-->
        <!--alarm.DESCRIPTION AS DESCRIPTION,-->
        <!--EXTEND,-->
        <!--DATE_FORMAT(FIRST_ALARM_TIME,'%Y-%m-%d %H:%i:%s') AS FIRST_ALARM_TIME,-->
        <!--DATE_FORMAT(FIRST_OPER_TIME,'%Y-%m-%d %H:%i:%s') AS FIRST_OPER_TIME,-->
        <!--GROUP_LOC,-->
        <!--HOST,-->
        <!--IS_HANDLE,-->
        <!--IS_REBOOT,-->
        <!--DATE_FORMAT(LAST_ALARM_TIME,'%Y-%m-%d %H:%i:%s') AS LAST_ALARM_TIME,-->
        <!--MONITOR,-->
        <!--DATE_FORMAT(OPER_TIME,'%Y-%m-%d %H:%i:%s') AS OPER_TIME,-->
        <!--OPERATOR,-->
        <!--PAGE_CODE,-->
        <!--PARAM,-->
        <!--PRIORITY,-->
        <!--DATE_FORMAT(REBOOT_TIME,'%Y-%m-%d %H:%i:%s') AS REBOOT_TIME,-->
        <!--RULE_ID,-->
        <!--rule.RULE_NAME AS RULE_NAME,-->
        <!--SERVER_TYPE,-->
        <!--SERVICE_TYPE,-->
        <!--SERVER_ID,-->
        <!--channel.engineerName AS CUST_MANAGER,-->
        <!--CASE WHEN (channel.vipLevel='1') THEN 'vip1' WHEN (channel.vipLevel='2') THEN 'vip2' WHEN (channel.vipLevel='3') THEN 'vip3' ELSE '普通' END  AS CUST_LEVEL,-->
        <!--channel.custCnName AS CUST_NAME,-->
        <!--channel.engineerMail AS CUST_MAIL,-->
        <!--'' AS CUST_PHONE-->
        <!--FROM CUR_ALARM alarm-->
        <!--LEFT JOIN CUST_MONITOR_RULE rule ON alarm.ALARM_KEY=rule.ID-->
        <!--LEFT JOIN BAS_CHANNEL channel ON channel.entername=rule.CUST_NAME-->
        <!--WHERE 1=1 AND alarm.DEL_FLAG!=1 AND (alarm.AUTO_FLAG IS NULL OR alarm.AUTO_FLAG=0)-->
        <!--AND LOWER(PAGE_CODE)='cust_page'-->
        <!--<dynamic prepend="and">-->
            <!--<isNotEmpty prepend="and" property="domainConfig">-->
                <!--<![CDATA[  UPPER(alarm.EXTEND) like UPPER('%$domainConfig$%')   ]]>-->
            <!--</isNotEmpty>-->
            <!--<isNotEmpty prepend="and" property="channel">-->
                <!--<![CDATA[  UPPER(alarm.EXTEND) like UPPER('%$channel$%')   ]]>-->
            <!--</isNotEmpty>-->
            <!--<isNotEmpty prepend="and" property="custName">-->
                <!--<![CDATA[  ( UPPER(rule.CUST_NAME) like UPPER('%$custName$%') OR UPPER(rule.CUST_NAME_CN) like UPPER('%$custName$%') ) ]]>-->
            <!--</isNotEmpty>-->
            <!--<isNotEmpty prepend="and" property="ruleName">-->
                <!--<![CDATA[  UPPER(rule.RULE_NAME) like UPPER('%$ruleName$%')   ]]>-->
            <!--</isNotEmpty>-->
            <!--<isNotEmpty prepend="and" property="custLevel">-->
                <!--<![CDATA[  channel.vipLevel in ($custLevel$)  ]]>-->
            <!--</isNotEmpty>-->
            <!--<isNotEmpty prepend="and" property="strategyId">-->
                <!--<![CDATA[  rule.STRATEGY_ID=#strategyId#  ]]>-->
            <!--</isNotEmpty>-->
            <!--<isNotEmpty prepend="and" property="startDate">-->
                <!--<![CDATA[  alarm.LAST_ALARM_TIME>=#startDate#  ]]>-->
            <!--</isNotEmpty>-->
            <!--<isNotEmpty prepend="and" property="endDate">-->
                <!--<![CDATA[  alarm.LAST_ALARM_TIME<=#endDate#  ]]>-->
            <!--</isNotEmpty>-->
        <!--</dynamic>-->
        <!--GROUP BY alarm.ALARM_ID-->
        <!--ORDER BY ALARM_GROUP ASC, LAST_ALARM_TIME DESC-->
    <!--</select>-->

    <!--<statement id="insertHisAlarmRely" resultClass="java.lang.Integer">-->
        <!--insert into HIS_ALARM_RELY_REL (ALARM_ID,RELY_ALARM_ID)-->
        <!--select ALARM_ID,RELY_ALARM_ID from ALARM_RELY_REL-->
        <!--where ALARM_ID = #value# OR RELY_ALARM_ID = #value#-->
    <!--</statement>-->

    <!--<statement id="deleteAlarmRely" resultClass="java.lang.Integer">-->
        <!--delete  from ALARM_RELY_REL-->
        <!--where ALARM_ID = #value# OR RELY_ALARM_ID = #value#-->
    <!--</statement>-->

    <!--<select id="getCustBaseAlarm" resultClass="java.util.HashMap">-->
        <!--SELECT-->
          <!--ALARM_ID,-->
          <!--CHANNELS,-->
          <!--RULE_ID,-->
          <!--STRATEGY_ID,-->
          <!--DATE_FORMAT(ALARM_TIME,'%Y-%m-%d %H:%i:%s') AS ALARM_TIME-->
        <!--FROM CUST_BASE_ALARM WHERE ALARM_ID=#alarmId#-->
    <!--</select>-->

    <!--<select id="getCustStatusCodeAlarm" resultClass="java.util.HashMap">-->
       <!--SELECT-->
          <!--ALARM_ID,-->
          <!--SCOPE,-->
          <!--CACHE_GROUP,-->
          <!--ISP,-->
          <!--CACHE_IP,-->
          <!--CHECK_RESULT,-->
          <!--ORI_DATA-->
        <!--FROM CUST_STATUS_CODE_ALARM WHERE ALARM_ID=#alarmId#-->
    <!--</select>-->

    <!--<select id="getCustBandwidthAlarm" resultClass="java.util.HashMap">-->
       <!--SELECT-->
          <!--ALARM_ID,-->
          <!--ALARM_TYPE,-->
          <!--SOURCE,-->
          <!--CHECK_RESULT,-->
          <!--ORI_DATA,-->
          <!--HIS_ORI_DATA-->
        <!--FROM CUST_BAND_WIDTH_ALARM WHERE ALARM_ID=#alarmId#-->
    <!--</select>-->

    <!--<select id="getCustReqAlarm" resultClass="java.util.HashMap">-->
       <!--SELECT-->
          <!--ALARM_ID,-->
          <!--ALARM_TYPE,-->
          <!--SOURCE,-->
          <!--CHECK_RESULT,-->
          <!--ORI_DATA,-->
          <!--HIS_ORI_DATA-->
        <!--FROM CUST_REQ_ALARM  WHERE ALARM_ID=#alarmId#-->
    <!--</select>-->

    <!--<select id="getPwOpLogList" resultClass="com.cnc.eagle.entity.conf.PwOpLog">-->
        <!--SELECT LOG_ID as logId,OPER_CODE as operCode,OPER_NAME as operName,OP_IP as opIp,OP_TIME as opTime,OP_TEXT as opText,MODULE as module,DEST_OBJ as destObj,OP_TYPE as opType-->
        <!--FROM PW_OPLOG-->
        <!--WHERE 1=1-->
        <!--<dynamic prepend="and">-->
            <!--<isNotEmpty prepend="and" property="destObj">-->
                <!--<![CDATA[  DEST_OBJ=#destObj# ]]>-->
            <!--</isNotEmpty>-->
        <!--</dynamic>-->
        <!--AND OP_TIME >= DATE_ADD(NOW(),INTERVAL -7 DAY)-->
        <!--ORDER BY OP_TIME DESC-->
    <!--</select>-->

    <!--<select id="getCustDueTimeAlarmIdList" resultClass="java.lang.String">-->
        <!--SELECT ALARM_ID FROM CUST_BASE_ALARM WHERE 1=1-->
        <!--<dynamic prepend="and">-->
        <!--<![CDATA[ALARM_TIME<DATE_SUB(now(),INTERVAL 6 MONTH)]]>-->
        <!--</dynamic>-->
    <!--</select>-->

    <!--<delete id="deleteDueCustBandAlarm">-->
      <!--delete from CUST_BAND_WIDTH_ALARM WHERE ALARM_ID IN-->
        <!--<iterate open="(" close=")" conjunction="," property="alarmIds">-->
            <!--#alarmIds[]#-->
        <!--</iterate>-->
    <!--</delete>-->

    <!--<delete id="deleteDueCustReqAlarm">-->
      <!--delete from CUST_REQ_ALARM WHERE ALARM_ID IN-->
        <!--<iterate open="(" close=")" conjunction="," property="alarmIds">-->
            <!--#alarmIds[]#-->
        <!--</iterate>-->
    <!--</delete>-->

    <!--<delete id="deleteDueCustStatusCodeAlarm">-->
      <!--delete from CUST_STATUS_CODE_ALARM WHERE ALARM_ID IN-->
        <!--<iterate open="(" close=")" conjunction="," property="alarmIds">-->
            <!--#alarmIds[]#-->
        <!--</iterate>-->
    <!--</delete>-->

    <!--<delete id="deleteDueCustBaseAlarm">-->
      <!--delete from CUST_BASE_ALARM WHERE ALARM_ID IN-->
        <!--<iterate open="(" close=")" conjunction="," property="alarmIds">-->
            <!--#alarmIds[]#-->
        <!--</iterate>-->
    <!--</delete>-->

    <!--<select id="getBusinessCurAlarmList" resultClass="java.util.HashMap">-->
        <!--SELECT-->
          <!--ALARM_ID,-->
          <!--ALARM_NAME,-->
          <!--HOST,-->
          <!--PARAM,-->
          <!--EXTEND,-->
          <!--ALARM_KEY,-->
          <!--DATE_FORMAT(FIRST_ALARM_TIME,'%Y-%m-%d %H:%i:%s') AS FIRST_ALARM_TIME,-->
          <!--DATE_FORMAT(LAST_ALARM_TIME,'%Y-%m-%d %H:%i:%s') AS LAST_ALARM_TIME,-->
          <!--TIMESTAMPDIFF(SECOND,FIRST_ALARM_TIME,LAST_ALARM_TIME) AS CONTINUE_TIME-->
        <!--FROM CUR_ALARM-->
        <!--WHERE 1=1-->
        <!--AND ALARM_LEVEL='CUST_BUSINESS'-->
        <!--<dynamic prepend="and">-->
            <!--<isNotEmpty prepend="and" property="alarmName">-->
                <!--<![CDATA[  ALARM_NAME=#alarmName# ]]>-->
            <!--</isNotEmpty>-->
            <!--<isNotEmpty prepend="and" property="host">-->
                <!--<![CDATA[  HOST=#host# ]]>-->
            <!--</isNotEmpty>-->
            <!--<isNotEmpty prepend="and" property="startDate">-->
                <!--<![CDATA[  DATE_FORMAT(LAST_ALARM_TIME,'%Y-%m-%d %H:%i:%s')>= DATE_FORMAT(#startDate#,'%Y-%m-%d 00:00:00') ]]>-->
            <!--</isNotEmpty>-->
            <!--<isNotEmpty prepend="and" property="endDate">-->
                <!--<![CDATA[  DATE_FORMAT(LAST_ALARM_TIME,'%Y-%m-%d %H:%i:%s') <=DATE_FORMAT(#endDate#,'%Y-%m-%d 23:59:59') ]]>-->
            <!--</isNotEmpty>-->
        <!--</dynamic>-->
        <!--ORDER BY LAST_ALARM_TIME DESC-->
    <!--</select>-->
    <!--<select id="getAlarmReferDetail" resultClass="java.util.HashMap" parameterClass="java.lang.String">-->
        <!--SELECT-->
          <!--ID,-->
          <!--SCOPE_DESC,-->
          <!--REFER_CHANNEL,-->
          <!--REFER_ISP_GROUP,-->
          <!--REFER_PROV_GROUP,-->
          <!--REFER_RELATE_ALARM-->
        <!--FROM ALARM_REFER_SCOPE-->
        <!--WHERE 1=1 AND ID=#id#-->
    <!--</select>-->

    <!--<select id="getAlarmLevelHostCount" resultClass="java.util.HashMap">-->
        <!--SELECT info.ALARM_LEVEL, alarm.HOST_TYPE,alarm.HOST, COUNT(alarm.ALARM_ID) AS ALARM_COUNT-->
        <!--FROM CUR_ALARM alarm LEFT JOIN CONF_ALARM_INFO info ON alarm.ALARM_NAME=info.ALARM_NAME-->
        <!--WHERE alarm.DEL_FLAG!=1 AND info.IS_DEL!=1-->
        <!--GROUP BY info.ALARM_LEVEL,alarm.HOST_TYPE,alarm.HOST-->
    <!--</select>-->
</sqlMap>